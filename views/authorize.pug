html
  head
    style.
      html {
        width: 100%;
        height: 100%;
      }
      body {
        background-color: #eff3f4;
        position: relative;
        width: 100%;
        height: 100%;
        font-size: 16px;
        font-family: 'Source Sans Pro', sans-serif;
        font-weight: 400;
        -webkit-font-smoothing: antialiased;
      }
      #login-form {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        display: block;
        width: 100%;
        max-width: 400px;
        background-color: #fff;
        margin: 0;
        padding: 2.25em;
        box-sizing: border-box;
        border: solid 1px #ddd;
        border-radius: 0.5em;
        font-family: 'Source Sans Pro', sans-serif;
      }
      #login-form .inputGroup {
        margin: 0 0 2em;
        padding: 0;
        position: relative;
      }
      #login-form .inputGroup:last-of-type {
        margin-bottom: 0;
      }
      #login-form label {
        margin: 0 0 12px;
        display: block;
        font-size: 1.25em;
        color: #217093;
        font-weight: 700;
        font-family: inherit;
      }
      #login-form input[type='email'], #login-form input[type="text"], #login-form input[type='password'] {
        display: block;
        margin: 0;
        padding: 0 1em 0;
        background-color: #f3fafd;
        border: solid 2px #217093;
        border-radius: 4px;
        -webkit-appearance: none;
        box-sizing: border-box;
        width: 100%;
        height: 65px;
        font-size: 1.55em;
        color: #353538;
        font-weight: 600;
        font-family: inherit;
        transition: box-shadow 0.2s linear, border-color 0.25s ease-out;
      }
      #login-form input[type='email']:focus, #login-form input[type="text"]:focus, #login-form input[type='password']:focus {
        outline: none;
        box-shadow: 0px 2px 10px rgba(0, 0, 0, .1);
        border: solid 2px #4eb8dd;
      }
      #login-form input[type='email'], #login-form input[type="text"] {
        padding: 14px 1em 0px;
      }
      #login-form button {
        display: block;
        margin: 0;
        padding: 0.65em 1em 1em;
        background-color: #4eb8dd;
        border: none;
        border-radius: 4px;
        box-sizing: border-box;
        box-shadow: none;
        width: 100%;
        height: 65px;
        font-size: 1.55em;
        color: #fff;
        font-weight: 600;
        font-family: inherit;
        transition: background-color 0.2s ease-out;
      }
      #login-form button:hover, #login-form button:active {
        background-color: #217093;
      }

      #login-form .smallbtn {
        width: auto;
        height: auto;
        font-size: 1em;
        padding: 10px 4px;
        display: inline;
      }
      h2 { color: rgb(0, 0, 0, .8); }
  body
    div(id='login-form' method='post')
      h2 National ID Authentication (DEMO)
      <div class="inputGroup inputGroup1">
        <label for="user">User</label>
        <input type="text" id="user" class="email" maxlength="256"/>
        <span class="indicator"></span>
      </div>
      <div class="inputGroup inputGroup2">
        <label for="afm">AFM</label>
        <input type="text" id="afm" class="password" />
      </div>
      <div class="inputGroup inputGroup3">
        <label for="lastname">Last Name</label>
        <input type="text" id="lastname" class="password" />
      </div>
      <div class="inputGroup inputGroup3">
        <button id="login">Log in</button>
      </div>	
      hr
      label Redirect Url:
      textarea(id='redirect-text' style='height: 100px; width: 100%') !{redirect}
    script.
      document.querySelector("#login").addEventListener('click', async () => {
        const user = document.querySelector("#user").value.trim();
        const afm = document.querySelector("#afm").value.trim();
        const lastname = document.querySelector("#lastname").value.trim();
        const redirectUrl = document.querySelector("#redirect-text").value;

        try {
          const response = await fetch('/setuserinfo', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({ user, afm, lastname })
          });

          if (!response.ok) {
            alert("Failed to set user info");
            return;
          }

          window.location = redirectUrl;
        } catch (err) {
          console.error('Error:', err);
          alert("An error occurred");
        }
      });

